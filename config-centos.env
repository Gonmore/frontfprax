# ===================================================================
# Archivo de Configuración de Despliegue - FPRAX CentOS
# ===================================================================

# Este archivo contiene todas las configuraciones necesarias para
# desplegar FPRAX en un servidor CentOS. Modificar según necesidades.

# ===================================================================
# CONFIGURACIÓN DEL SERVIDOR
# ===================================================================

# Información del servidor
SERVER_IP="192.168.1.100"          # Cambiar por la IP de tu servidor CentOS
SERVER_DOMAIN="fprax.local"        # Opcional: dominio personalizado
SERVER_USER="fprax"                # Usuario del sistema para la aplicación

# Puertos de aplicación
FRONTEND_PORT=3000
BACKEND_PORT=5000
NGINX_PORT=80
NGINX_SSL_PORT=443

# ===================================================================
# CONFIGURACIÓN DE BASE DE DATOS
# ===================================================================

DB_HOST="localhost"
DB_PORT=5432
DB_NAME="fprax_db"
DB_USER="fprax_user"
DB_PASSWORD="FpraxDB2024!Secure"   # Cambiar por una contraseña segura

# ===================================================================
# CONFIGURACIÓN DE SEGURIDAD
# ===================================================================

# Secrets para JWT y sesiones (generar nuevos para producción)
JWT_SECRET="tu-jwt-secret-muy-seguro-de-32-caracteres-o-mas"
SESSION_SECRET="tu-session-secret-muy-seguro-de-32-caracteres-o-mas"

# Salt rounds para bcrypt
BCRYPT_SALT_ROUNDS=12

# ===================================================================
# CONFIGURACIÓN DE APLICACIÓN
# ===================================================================

# Environment
NODE_ENV="production"

# URLs de aplicación
FRONTEND_URL="http://${SERVER_IP}:${FRONTEND_PORT}"
BACKEND_URL="http://${SERVER_IP}:${BACKEND_PORT}"
API_URL="http://${SERVER_IP}:${BACKEND_PORT}"

# Si usas Nginx como proxy
NGINX_FRONTEND_URL="http://${SERVER_IP}"
NGINX_BACKEND_URL="http://${SERVER_IP}/api"

# ===================================================================
# CONFIGURACIÓN DE AUTENTICACIÓN SOCIAL (OPCIONAL)
# ===================================================================

# Google OAuth
GOOGLE_CLIENT_ID="tu-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="tu-google-client-secret"

# Facebook OAuth
FACEBOOK_CLIENT_ID="tu-facebook-app-id"
FACEBOOK_CLIENT_SECRET="tu-facebook-app-secret"

# NextAuth (si usas Next.js Auth)
NEXTAUTH_URL="http://${SERVER_IP}"
NEXTAUTH_SECRET="tu-nextauth-secret-muy-seguro"

# ===================================================================
# CONFIGURACIÓN DE EMAIL (OPCIONAL)
# ===================================================================

# Configuración SMTP para envío de emails
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USER="tu-email@gmail.com"
SMTP_PASSWORD="tu-app-password"
SMTP_FROM="noreply@fprax.com"

# ===================================================================
# CONFIGURACIÓN DE ARCHIVOS Y UPLOADS
# ===================================================================

# Rutas de archivos
UPLOAD_PATH="/opt/fprax/uploads"
STATIC_PATH="/opt/fprax/static"
LOG_PATH="/opt/fprax/logs"

# Tamaños máximos
MAX_FILE_SIZE="10MB"
MAX_FILES_PER_REQUEST=5

# ===================================================================
# CONFIGURACIÓN DE LOGS
# ===================================================================

# Nivel de logs (error, warn, info, debug)
LOG_LEVEL="info"

# Rotación de logs
LOG_MAX_SIZE="100MB"
LOG_MAX_FILES=10
LOG_DATE_PATTERN="YYYY-MM-DD"

# ===================================================================
# CONFIGURACIÓN DE PERFORMANCE
# ===================================================================

# PM2 Configuration
PM2_INSTANCES="max"              # "max" para usar todos los cores
PM2_MAX_MEMORY="1G"             # Reiniciar si excede memoria
PM2_RESTART_DELAY=4000          # Delay entre reinicios

# Session Configuration
SESSION_MAX_AGE=86400000        # 24 horas en millisegundos
SESSION_STORE="database"        # "memory" o "database"

# ===================================================================
# CONFIGURACIÓN DE NGINX
# ===================================================================

# Configuración de proxy
NGINX_PROXY_TIMEOUT=30
NGINX_CLIENT_MAX_BODY_SIZE="50M"
NGINX_WORKER_PROCESSES="auto"
NGINX_WORKER_CONNECTIONS=1024

# Cache
NGINX_CACHE_ENABLED=true
NGINX_CACHE_TIME="1h"

# ===================================================================
# CONFIGURACIÓN DE BACKUP
# ===================================================================

# Configuración de respaldos automáticos
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"     # Diario a las 2 AM
BACKUP_RETENTION_DAYS=30        # Mantener 30 días
BACKUP_PATH="/opt/fprax/backups"

# ===================================================================
# CONFIGURACIÓN DE MONITOREO
# ===================================================================

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30        # segundos
HEALTH_CHECK_TIMEOUT=5          # segundos

# Métricas
METRICS_ENABLED=true
METRICS_PORT=9090

# ===================================================================
# CONFIGURACIÓN DE DESARROLLO/DEBUG
# ===================================================================

# Solo para desarrollo
DEBUG_MODE=false
VERBOSE_LOGGING=false
API_RATE_LIMIT=100              # requests por minuto por IP

# ===================================================================
# CONFIGURACIÓN DE CERTIFICADOS SSL (FUTURO)
# ===================================================================

# Paths para certificados SSL
SSL_CERT_PATH="/etc/ssl/certs/fprax.crt"
SSL_KEY_PATH="/etc/ssl/private/fprax.key"
SSL_ENABLED=false

# Let's Encrypt
LETSENCRYPT_EMAIL="admin@fprax.com"
LETSENCRYPT_DOMAIN="${SERVER_DOMAIN}"

# ===================================================================
# NOTAS DE CONFIGURACIÓN
# ===================================================================

# 1. Cambiar todas las contraseñas y secrets por valores seguros
# 2. Configurar las URLs según tu entorno específico
# 3. Habilitar SSL en producción
# 4. Configurar monitoreo y alertas
# 5. Establecer backups automáticos
# 6. Revisar configuraciones de firewall
# 7. Configurar dominio real si está disponible

# ===================================================================
# COMANDOS ÚTILES PARA GENERAR SECRETS
# ===================================================================

# Generar JWT Secret:
# openssl rand -base64 32

# Generar Session Secret:
# openssl rand -hex 32

# Generar password seguro:
# openssl rand -base64 16

# ===================================================================
# VALIDACIÓN DE CONFIGURACIÓN
# ===================================================================

# Después de modificar este archivo, validar:
# 1. Que todas las URLs sean accesibles
# 2. Que las contraseñas sean seguras (min 12 caracteres)
# 3. Que los puertos no estén en conflicto
# 4. Que las rutas de archivos existan y tengan permisos
# 5. Que los secrets sean únicos y seguros
